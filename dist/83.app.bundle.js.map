{"version":3,"file":"83.app.bundle.js","mappings":"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","sources":["webpack://curso-platzi-react-avanzado/./src/components/HelmetLayout/index.js","webpack://curso-platzi-react-avanzado/./src/components/ListOfPhotoCards/styles.js","webpack://curso-platzi-react-avanzado/./src/components/PageTitle/styles.js","webpack://curso-platzi-react-avanzado/./src/components/PageTitle/index.js","webpack://curso-platzi-react-avanzado/./src/hooks/useMutationToggleLike.js","webpack://curso-platzi-react-avanzado/./src/components/FavButton/styles.js","webpack://curso-platzi-react-avanzado/./src/components/FavButton/index.js","webpack://curso-platzi-react-avanzado/./src/components/PhotoCard/styles.js","webpack://curso-platzi-react-avanzado/./src/components/PhotoCard/index.js","webpack://curso-platzi-react-avanzado/./src/hooks/useNearScreen.js","webpack://curso-platzi-react-avanzado/./src/containers/PhotoCardWithQuery.js","webpack://curso-platzi-react-avanzado/./src/hooks/useGetSinglePhoto.js","webpack://curso-platzi-react-avanzado/./src/pages/Detail.js"],"sourcesContent":["import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport const HelmetLayout = ({ children, title, description }) => {\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        {title && <title>Petgram ğŸ¦Š | {title}</title>}\r\n        {description && <meta name=\"description\" content={description} />}\r\n      </Helmet>\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const List = styled.ul`\r\n  width: 80%;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n\r\nexport const Item = styled.li`\r\n  margin-bottom: 1.5rem;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  box-shadow: 0px 10px 14px rgba(0, 0, 0, 0.2);\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Title = styled.h1`\r\n  width: 80%;\r\n  margin: 0 auto .5rem;\r\n`;\r\n","import React from \"react\";\r\nimport { Title } from \"./styles\";\r\n\r\nexport const PageTitle = ({ content }) => {\r\n  return <Title>{content}</Title>;\r\n};\r\n","import { gql, useMutation } from \"@apollo/client\";\r\n\r\nconst LIKE_PHOTO = gql`\r\n  mutation likePhoto($input: LikePhoto!) {\r\n    likePhoto(input: $input) {\r\n      id\r\n      liked\r\n      likes\r\n    }\r\n  }\r\n`;\r\n\r\nexport const useMutationToggleLike = () => {\r\n  const [mutation, { loading: mutationLoading, error: mutationError }] =\r\n    useMutation(LIKE_PHOTO);\r\n  return { mutation, mutationLoading, mutationError };\r\n};\r\n","import styled from \"styled-components\";\r\nimport { MdFavorite } from \"react-icons/md\";\r\nimport { fadeIn } from \"../../styles/animation\";\r\n\r\nexport const Button = styled.button`\r\n  padding-top: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  & svg {\r\n    margin-right: 4px;\r\n  }\r\n`;\r\n\r\nexport const LikedIcon = styled(MdFavorite)`\r\n  color: #ff277a;\r\n  ${fadeIn({ time: \".2s\" })}\r\n`;\r\n","import React from \"react\";\r\nimport { LikedIcon, Button } from \"./styles\";\r\nimport { GrFavorite } from \"react-icons/gr\";\r\n\r\nexport const FavButton = ({ liked, likes, onClick }) => {\r\n  return (\r\n    <Button onClick={onClick}>\r\n      {liked ? <LikedIcon size=\"32px\" /> : <GrFavorite size=\"32px\" />}\r\n      {likes} likes!\r\n    </Button>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\nimport { fadeIn } from \"../../styles/animation\";\r\n\r\nexport const Article = styled.article`\r\n  min-height: 200px;\r\n`;\r\n\r\nexport const ImgWrapper = styled.div`\r\n  width: 100%;\r\n  height: 0;\r\n  display: block;\r\n  position: relative;\r\n  padding: 56.25% 0 0 0;\r\n`;\r\n\r\nexport const Img = styled.img`\r\n  ${fadeIn({ time: \"0.5s\" })}\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-shadow: 0 10px 14px rgba(0, 0, 0, 0.2);\r\n  object-fit: cover;\r\n`;\r\n","import React, { useContext } from \"react\";\r\nimport { AppContext } from \"../../AppContext\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport { useNearScreen } from \"../../hooks/useNearScreen\";\r\nimport { useMutationToggleLike } from \"../../hooks/useMutationToggleLike\";\r\nimport { FavButton } from \"../FavButton\";\r\nimport { Img, ImgWrapper, Article } from \"./styles\";\r\n\r\nconst DEFAULT_IMAGE =\r\n  \"https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/65761296352685.5eac4787a4720.jpg\";\r\n\r\nexport const PhotoCard = ({ id, liked, likes = 0, src = DEFAULT_IMAGE }) => {\r\n  const { isAuth } = useContext(AppContext);\r\n  const navigate = useNavigate();\r\n  const [show, element] = useNearScreen();\r\n  const { mutation } = useMutationToggleLike();\r\n\r\n  const handleFavClick = () => {\r\n    if (!isAuth) return navigate(\"/register\");\r\n    mutation({\r\n      variables: {\r\n        input: { id },\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Article ref={element}>\r\n      {show && (\r\n        <>\r\n          <NavLink to={`/detail/${id}`}>\r\n            <ImgWrapper>\r\n              <Img src={src} />\r\n            </ImgWrapper>\r\n          </NavLink>\r\n\r\n          <FavButton liked={liked} likes={likes} onClick={handleFavClick} />\r\n        </>\r\n      )}\r\n    </Article>\r\n  );\r\n};\r\n","import { useEffect, useState, useRef } from \"react\";\r\n\r\nexport const useNearScreen = () => {\r\n  const [show, setShow] = useState(false);\r\n  const element = useRef(null);\r\n\r\n  useEffect(() => {\r\n    Promise.resolve(\r\n      typeof IntersectionObserver !== undefined\r\n        ? IntersectionObserver\r\n        : import(\"intersection-observer\")\r\n    ).then(() => {\r\n      const observer = new IntersectionObserver((entries) => {\r\n        const { isIntersecting } = entries[0];\r\n        if (isIntersecting) {\r\n          setShow(true);\r\n          observer.disconnect();\r\n        }\r\n      });\r\n      observer.observe(element.current);\r\n    });\r\n  }, [element]);\r\n\r\n  return [show, element];\r\n};\r\n","import React from \"react\";\r\nimport { useGetSinglePhoto } from \"../hooks/useGetSinglePhoto\";\r\nimport { PhotoCard } from \"../components/PhotoCard\";\r\n\r\nexport const PhotoCardWithQuery = ({ id }) => {\r\n  const { loading, error, data } = useGetSinglePhoto(id);\r\n  if (error) return `Error! ${error.message}`;\r\n\r\n  return <>{loading ? <PhotoCard /> : <PhotoCard {...data.photo} />}</>;\r\n};\r\n","import { gql, useQuery } from \"@apollo/client\";\r\n\r\nexport const useGetSinglePhoto = (id) => {\r\n  const GET_SINGLE_PHOTO = gql`\r\n    query getSinglePhoto($id: ID!) {\r\n      photo(id: $id) {\r\n        id\r\n        categoryId\r\n        src\r\n        likes\r\n        liked\r\n        userId\r\n      }\r\n    }\r\n  `;\r\n\r\n  const { loading, error, data } = useQuery(GET_SINGLE_PHOTO, {\r\n    variables: { id },\r\n  });\r\n\r\n  return { loading, error, data };\r\n};\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { HelmetLayout } from \"../components/HelmetLayout\";\r\nimport { List, Item } from \"../components/ListOfPhotoCards/styles\";\r\nimport { PageTitle } from \"../components/PageTitle\";\r\nimport { PhotoCardWithQuery } from \"../containers/PhotoCardWithQuery\";\r\n\r\nconst Detail = () => {\r\n  const params = useParams();\r\n  return (\r\n    <HelmetLayout title={`FotografÃ­a ${params.id}`}>\r\n      <PageTitle content=\"Detalle\" />\r\n      <List>\r\n        <Item>\r\n          <PhotoCardWithQuery id={params.id} />\r\n        </Item>\r\n      </List>\r\n    </HelmetLayout>\r\n  );\r\n};\r\n\r\nexport default Detail;\r\n"],"names":["HelmetLayout","children","title","description","name","content","List","styled","Item","Title","PageTitle","LIKE_PHOTO","gql","Button","LikedIcon","MdFavorite","fadeIn","time","FavButton","liked","likes","onClick","size","Article","ImgWrapper","Img","PhotoCard","id","src","isAuth","useContext","AppContext","navigate","useNavigate","useState","show","setShow","element","useRef","useEffect","Promise","resolve","undefined","IntersectionObserver","then","observer","entries","isIntersecting","disconnect","observe","current","useNearScreen","useMutation","mutation","mutationLoading","loading","mutationError","error","useMutationToggleLike","ref","to","variables","input","PhotoCardWithQuery","GET_SINGLE_PHOTO","useQuery","data","message","photo","params","useParams"],"sourceRoot":""}