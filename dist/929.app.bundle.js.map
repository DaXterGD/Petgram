{"version":3,"file":"929.app.bundle.js","mappings":"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","sources":["webpack://curso-platzi-react-avanzado/./src/components/HelmetLayout/index.js","webpack://curso-platzi-react-avanzado/./src/components/PageTitle/styles.js","webpack://curso-platzi-react-avanzado/./src/components/PageTitle/index.js","webpack://curso-platzi-react-avanzado/./src/hooks/useRegisterMutation.js","webpack://curso-platzi-react-avanzado/./src/hooks/useLoginMutation.js","webpack://curso-platzi-react-avanzado/./src/hooks/useInputValue.js","webpack://curso-platzi-react-avanzado/./src/components/UserForm/styles.js","webpack://curso-platzi-react-avanzado/./src/components/UserForm/index.js","webpack://curso-platzi-react-avanzado/./src/pages/Register.js","webpack://curso-platzi-react-avanzado/./node_modules/@apollo/client/react/hooks/useMutation.js"],"sourcesContent":["import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport const HelmetLayout = ({ children, title, description }) => {\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        {title && <title>Petgram ðŸ¦Š | {title}</title>}\r\n        {description && <meta name=\"description\" content={description} />}\r\n      </Helmet>\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const Title = styled.h1`\r\n  width: 80%;\r\n  margin: 0 auto .5rem;\r\n`;\r\n","import React from \"react\";\r\nimport { Title } from \"./styles\";\r\n\r\nexport const PageTitle = ({ content }) => {\r\n  return <Title>{content}</Title>;\r\n};\r\n","import { gql, useMutation } from \"@apollo/client\";\r\n\r\nconst REGISTER = gql`\r\n  mutation signup($input: UserCredentials!) {\r\n    signup(input: $input)\r\n  }\r\n`;\r\n\r\nexport const useRegisterMutation = () => {\r\n  const [registerMutation, { loading, error }] = useMutation(REGISTER);\r\n  return { registerMutation, loading, error };\r\n};\r\n","import { gql, useMutation } from \"@apollo/client\";\r\n\r\nconst LOGIN_MUTATION = gql`\r\n  mutation login($input: UserCredentials!) {\r\n    login(input: $input)\r\n  }\r\n`;\r\n\r\nexport const useLoginMutation = () => {\r\n  const [loginMutation, { loading, error }] = useMutation(LOGIN_MUTATION);\r\n  return { loginMutation, loading, error };\r\n};\r\n","import { useState } from \"react\";\r\n\r\nexport const useInputValue = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n  const onChange = (e) => setValue(e.target.value);\r\n\r\n  return { value, onChange };\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const Form = styled.form`\r\n  width: 80%;\r\n  padding: 16px 0;\r\n  margin: 2rem auto;\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  border: 1px solid #ccc;\r\n  border-radius: 50px;\r\n  margin-bottom: 8px;\r\n  padding: 8px 4px;\r\n  display: block;\r\n  width: 100%;\r\n  &[disabled] {\r\n    opacity: 0.5;\r\n  }\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  background-image: linear-gradient(to right, #e900c8, #00e8ff, #00ffc5);\r\n  border-radius: 50px;\r\n  color: #fff;\r\n  width: 100%;\r\n  height: 32px;\r\n  display: block;\r\n  text-align: center;\r\n`;\r\n\r\nexport const ButtonLoading = styled.button`\r\n  background-image: linear-gradient(to right, #e900c8, #00e8ff, #00ffc5);\r\n  border-radius: 50px;\r\n  color: #fff;\r\n  width: 100%;\r\n  height: 32px;\r\n  display: block;\r\n  text-align: center;\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  &[disabled] {\r\n    opacity: 0.5;\r\n  }\r\n`;\r\n\r\nexport const Title = styled.h2`\r\n  /* width: 80%; */\r\n  /* margin: 0 auto; */\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  padding: 8px 0;\r\n`;\r\n\r\nexport const Message = styled.p`\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  padding: 8px 0;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  border-radius: 50px;\r\n  font-weight: bold;\r\n  background-color: ${(props) =>\r\n    props.type === \"error\" ? \"#e900c8\" : \"#59FFB9\"};\r\n`;\r\n\r\n// export const Success = styled.p`\r\n//   width: 100%;\r\n//   margin: 0 auto;\r\n//   padding: 8px 0;\r\n//   text-align: center;\r\n//   font-size: 14px;\r\n//   color: #fff;\r\n//   background-color: #59ffb9;\r\n//   border-radius: 50px;\r\n// `;\r\n","import React from \"react\";\r\nimport { useInputValue } from \"../../hooks/useInputValue\";\r\nimport { Form, Input, Button, ButtonLoading, Title, Message } from \"./styles\";\r\n\r\nconst UserFormComponent = ({ onSubmit, title, error, loading, success }) => {\r\n  const email = useInputValue(\"\");\r\n  const password = useInputValue(\"\");\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    onSubmit({ email: email.value, password: password.value });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form disabled={loading} onSubmit={handleSubmit}>\r\n        {error && <Message type=\"error\">{error}</Message>}\r\n        {success && <Message type=\"success\">{success}</Message>}\r\n        <Title>{title}</Title>\r\n        <Input\r\n          disabled={loading}\r\n          type=\"email\"\r\n          placeholder=\"est@example.com\"\r\n          {...email}\r\n        />\r\n        <Input\r\n          disabled={loading}\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          {...password}\r\n        />\r\n        {loading ? (\r\n          <ButtonLoading disabled={loading}>...</ButtonLoading>\r\n        ) : (\r\n          <Button>{title}</Button>\r\n        )}\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const UserForm = React.memo(UserFormComponent);\r\n","import React, { useContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useRegisterMutation } from \"../hooks/useRegisterMutation\";\r\nimport { useLoginMutation } from \"../hooks/useLoginMutation\";\r\nimport { HelmetLayout } from \"../components/HelmetLayout\";\r\nimport { AppContext } from \"../AppContext\";\r\nimport { UserForm } from \"../components/UserForm\";\r\nimport { PageTitle } from \"../components/PageTitle\";\r\n\r\nconst RegisterPage = () => {\r\n  const [successMsg, setSuccessMsg] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const { activateAuth } = useContext(AppContext);\r\n\r\n  const {\r\n    registerMutation,\r\n    loading: loadingRegister,\r\n    error: errorRegister,\r\n  } = useRegisterMutation();\r\n\r\n  const {\r\n    loginMutation,\r\n    loading: loadingLogin,\r\n    error: errorLogin,\r\n  } = useLoginMutation();\r\n\r\n  const onSubmitRegister = ({ email, password }) => {\r\n    const input = { email, password };\r\n    const variable = { input };\r\n    registerMutation({ variables: variable }).then((response) => {\r\n      const { register } = response.data;\r\n      console.log(register);\r\n      activateAuth(register);\r\n      setSuccessMsg(\"Usuario registrado con Ã©xito\");\r\n    });\r\n  };\r\n\r\n  const onSubmitLogin = ({ email, password }) => {\r\n    const input = { email, password };\r\n    const variable = { input };\r\n    loginMutation({ variables: variable }).then((response) => {\r\n      const { login } = response.data;\r\n      console.log(login);\r\n      activateAuth(login);\r\n      navigate(\"/\");\r\n    });\r\n  };\r\n\r\n  const registerErrorMsg =\r\n    errorRegister && \"El usuario ya existe o hay algÃºn problema :(\";\r\n  const loginErrorMsg = errorLogin && \"Credenciales invalidas\";\r\n\r\n  return (\r\n    <HelmetLayout\r\n      title=\"RegÃ­strate\"\r\n      description=\"En esta secciÃ³n podrÃ¡s registrarte e iniciar sesiÃ³n. Animate, Â¡no cuesta nada!\"\r\n    >\r\n      <PageTitle content=\"Â¡RegÃ­strate para disfrutar de todo nuestro contenido!\" />\r\n      <UserForm\r\n        error={registerErrorMsg}\r\n        loading={loadingRegister}\r\n        success={successMsg}\r\n        onSubmit={onSubmitRegister}\r\n        title=\"RegÃ­strate\"\r\n      />\r\n      <UserForm\r\n        error={loginErrorMsg}\r\n        loading={loadingLogin}\r\n        onSubmit={onSubmitLogin}\r\n        title=\"Iniciar SesiÃ³n\"\r\n      />\r\n    </HelmetLayout>\r\n  );\r\n};\r\n\r\nconst Register = React.memo(RegisterPage);\r\n\r\nexport default Register;\r\n","import { __assign } from \"tslib\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { mergeOptions, } from \"../../core/index.js\";\nimport { equal } from '@wry/equality';\nimport { DocumentType, verifyDocumentType } from \"../parser/index.js\";\nimport { ApolloError } from \"../../errors/index.js\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nexport function useMutation(mutation, options) {\n    var client = useApolloClient(options === null || options === void 0 ? void 0 : options.client);\n    verifyDocumentType(mutation, DocumentType.Mutation);\n    var _a = useState({\n        called: false,\n        loading: false,\n        client: client,\n    }), result = _a[0], setResult = _a[1];\n    var ref = useRef({\n        result: result,\n        mutationId: 0,\n        isMounted: true,\n        client: client,\n        mutation: mutation,\n        options: options,\n    });\n    {\n        Object.assign(ref.current, { client: client, options: options, mutation: mutation });\n    }\n    var execute = useCallback(function (executeOptions) {\n        if (executeOptions === void 0) { executeOptions = {}; }\n        var _a = ref.current, client = _a.client, options = _a.options, mutation = _a.mutation;\n        var baseOptions = __assign(__assign({}, options), { mutation: mutation });\n        if (!ref.current.result.loading && !baseOptions.ignoreResults) {\n            setResult(ref.current.result = {\n                loading: true,\n                error: void 0,\n                data: void 0,\n                called: true,\n                client: client,\n            });\n        }\n        var mutationId = ++ref.current.mutationId;\n        var clientOptions = mergeOptions(baseOptions, executeOptions);\n        return client.mutate(clientOptions).then(function (response) {\n            var _a, _b;\n            var data = response.data, errors = response.errors;\n            var error = errors && errors.length > 0\n                ? new ApolloError({ graphQLErrors: errors })\n                : void 0;\n            if (mutationId === ref.current.mutationId &&\n                !clientOptions.ignoreResults) {\n                var result_1 = {\n                    called: true,\n                    loading: false,\n                    data: data,\n                    error: error,\n                    client: client,\n                };\n                if (ref.current.isMounted && !equal(ref.current.result, result_1)) {\n                    setResult(ref.current.result = result_1);\n                }\n            }\n            (_a = baseOptions.onCompleted) === null || _a === void 0 ? void 0 : _a.call(baseOptions, response.data);\n            (_b = executeOptions.onCompleted) === null || _b === void 0 ? void 0 : _b.call(executeOptions, response.data);\n            return response;\n        }).catch(function (error) {\n            var _a, _b;\n            if (mutationId === ref.current.mutationId &&\n                ref.current.isMounted) {\n                var result_2 = {\n                    loading: false,\n                    error: error,\n                    data: void 0,\n                    called: true,\n                    client: client,\n                };\n                if (!equal(ref.current.result, result_2)) {\n                    setResult(ref.current.result = result_2);\n                }\n            }\n            if (baseOptions.onError || clientOptions.onError) {\n                (_a = baseOptions.onError) === null || _a === void 0 ? void 0 : _a.call(baseOptions, error);\n                (_b = executeOptions.onError) === null || _b === void 0 ? void 0 : _b.call(executeOptions, error);\n                return { data: void 0, errors: error };\n            }\n            throw error;\n        });\n    }, []);\n    var reset = useCallback(function () {\n        setResult({ called: false, loading: false, client: client });\n    }, []);\n    useEffect(function () { return function () {\n        ref.current.isMounted = false;\n    }; }, []);\n    return [execute, __assign({ reset: reset }, result)];\n}\n//# sourceMappingURL=useMutation.js.map"],"names":["HelmetLayout","children","title","description","name","content","Title","styled","PageTitle","REGISTER","gql","LOGIN_MUTATION","useInputValue","initialValue","useState","value","setValue","onChange","e","target","Form","Input","Button","ButtonLoading","Message","props","type","UserFormComponent","onSubmit","error","loading","success","email","password","disabled","event","preventDefault","placeholder","UserForm","React","RegisterPage","successMsg","setSuccessMsg","navigate","useNavigate","activateAuth","useContext","AppContext","useMutation","registerMutation","useRegisterMutation","loadingRegister","errorRegister","loginMutation","useLoginMutation","loadingLogin","registerErrorMsg","loginErrorMsg","variables","input","then","response","register","data","console","log","login","mutation","options","client","_a","called","result","setResult","ref","useRef","mutationId","isMounted","Object","assign","current","execute","useCallback","executeOptions","baseOptions","ignoreResults","clientOptions","mutate","_b","errors","length","graphQLErrors","result_1","onCompleted","call","catch","result_2","onError","reset","useEffect"],"sourceRoot":""}